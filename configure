#!/bin/bash

CONFIG=config
out=$CONFIG

prefix=/usr/local
function argument {
	echo ${1} | awk 'BEGIN { FS = "="} {print $2}'
}

while [ "${1}" != "" ]; do
	case ${1} in
		--prefix*)
			prefix=$(argument ${1})
			;;
		--bindir*)
			bindir=$(argument ${1})
			;;
		--sbindir*)
			sbindir=$(argument ${1})
			;;
		--includedir*)
			includedir=$(argument ${1})
			;;
		--libdir*)
			libdir=$(argument ${1})
			;;
		--sysconfdir*)
			sysconfdir=$(argument ${1})
			;;
		--host*)
			CROSS_COMPILER=$(argument ${1})
			;;
	esac
	shift
done

if [ -z ${bindir} ]; then
	bindir=${prefix}/bin
fi
if [ -z ${sbindir} ]; then
	sbindir=${prefix}/sbin
fi
if [ -z ${includedir} ]; then
	includedir=${prefix}/include
fi
if [ -z ${libdir} ]; then
	libdir=${prefix}/lib
fi
if [ -z ${sysconfdir} ]; then
	sysconfdir=${prefix}/etc
fi

echo "prefix=\""$prefix"\"" >> $out
echo "bindir=\""$bindir"\"" >> $out
echo "sbindir=\""$sbindir"\"" >> $out
echo "includedir=\""$includedir"\"" >> $out
echo "libdir=\""$libdir"\"" >> $out
echo "sysconfdir=\""$sysconfdir"\"" >> $out
if [ $CROSS_COMPILER ]; then
	echo "CROSS_COMPILER="$CROSS_COMPILER >> $out
fi
